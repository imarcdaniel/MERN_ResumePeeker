{"ast":null,"code":"import _regeneratorRuntime from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';var SignUpForm=/*#__PURE__*/function(_Component){_inherits(SignUpForm,_Component);var _super=_createSuper(SignUpForm);function SignUpForm(){var _this;_classCallCheck(this,SignUpForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:'',email:'',password:'',confirm:'',error:''};_this.handleChange=function(evt){var _this$setState;_this.setState((_this$setState={},_defineProperty(_this$setState,evt.target.name,evt.target.value),_defineProperty(_this$setState,\"error\",''),_this$setState));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(evt){var fetchResponse,token,userDoc;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:evt.preventDefault();_context.prev=1;_context.next=4;return fetch('/api/users/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:_this.state.name,email:_this.state.email,password:_this.state.password})});case 4:fetchResponse=_context.sent;if(fetchResponse.ok){_context.next=7;break;}throw new Error('Fetch failed - Bad request');case 7:_context.next=9;return fetchResponse.json();case 9:token=_context.sent;// we are saving the token inside the user's browser-- localStorg\nlocalStorage.setItem('token',token);// decoding the JWT payload to pull out the user {}\nuserDoc=JSON.parse(atob(token.split('.')[1])).user;_this.props.setUserInState(userDoc);_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);console.log(\"SignupForm error\",_context.t0);_this.setState({error:'Sign Up Failed - Try Again'});case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,15]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SignUpForm,[{key:\"render\",value:function render(){var disable=this.state.password!==this.state.confirm;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-container\"},/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"label\",null,\"Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",value:this.state.name,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",value:this.state.email,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",value:this.state.password,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Confirm\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"confirm\",value:this.state.confirm,onChange:this.handleChange,required:true}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",disabled:disable},\"SIGN UP\"))),/*#__PURE__*/React.createElement(\"p\",{className:\"error-message\"},\"\\xA0\",this.state.error));}}]);return SignUpForm;}(Component);export{SignUpForm as default};","map":{"version":3,"sources":["/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/src/components/SignUpForm/SignUpForm.jsx"],"names":["React","Component","SignUpForm","state","name","email","password","confirm","error","handleChange","evt","setState","target","value","handleSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","fetchResponse","ok","Error","json","token","localStorage","setItem","userDoc","parse","atob","split","user","props","setUserInState","console","log","disable"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nexport default class SignUpForm extends Component {\n  state = {\n    name: '',\n    email: '',\n    password: '',\n    confirm: '',\n    error: ''\n  };\n\n  handleChange = (evt) => {\n    this.setState({\n      [evt.target.name]: evt.target.value,\n      error: ''\n    });\n  };\n\n  handleSubmit = async (evt) => {\n    evt.preventDefault();\n    try {\n      \n      const fetchResponse = await fetch('/api/users/signup', {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify({\n          name: this.state.name,\n          email: this.state.email,\n          password: this.state.password,\n        })\n      })\n      // 2. Check \"fetchResponse.ok\". False means status code was 4xx from the server/controller action\n      if (!fetchResponse.ok) throw new Error('Fetch failed - Bad request')\n\n      // decoding our response into js {} and [] format\n      let token = await fetchResponse.json();\n\n      // we are saving the token inside the user's browser-- localStorg\n      localStorage.setItem('token', token)\n\n      // decoding the JWT payload to pull out the user {}\n      const userDoc = JSON.parse(atob(token.split('.')[1])).user;\n\n      this.props.setUserInState(userDoc)\n\n\n    } catch (err) {\n      console.log(\"SignupForm error\", err)\n      this.setState({ error: 'Sign Up Failed - Try Again' });\n    }\n  }\n\n  render() {\n    const disable = this.state.password !== this.state.confirm;\n    return (\n      <div>\n        <div className=\"form-container\">\n          <form autoComplete=\"off\" onSubmit={this.handleSubmit}>\n            <label>Name</label>\n            <input type=\"text\" name=\"name\" value={this.state.name} onChange={this.handleChange} required />\n            <label>Email</label>\n            <input type=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} required />\n            <label>Password</label>\n            <input type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} required />\n            <label>Confirm</label>\n            <input type=\"password\" name=\"confirm\" value={this.state.confirm} onChange={this.handleChange} required />\n            <button type=\"submit\" disabled={disable}>SIGN UP</button>\n          </form>\n        </div>\n        <p className=\"error-message\">&nbsp;{this.state.error}</p>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}