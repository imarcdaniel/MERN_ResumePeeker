{"ast":null,"code":"import _classCallCheck from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var FileUpload=/*#__PURE__*/function(_Component){_inherits(FileUpload,_Component);var _super=_createSuper(FileUpload);function FileUpload(){var _this;_classCallCheck(this,FileUpload);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,uploading:false,images:[]};_this.onChange=function(e){var errs=[];var files=Array.from(e.target.files);var formData=new FormData();var types=['image/png','image/jpeg','image/gif'];files.forEach(function(file,i){if(types.every(function(type){return file.type!==type;})){errs.push(\"'\".concat(file.type,\"' is not a supported format\"));}if(file.size>150000){errs.push(\"'\".concat(file.name,\"' is too large, please pick a smaller file\"));}formData.append(\"file\",file);});if(errs.length){return errs.forEach(function(err){return console.log(err);});}_this.setState({uploading:true});fetch(\"api/images/put\",{method:'POST',body:formData}).then(function(res){if(!res.ok){throw res;}return res.json();}).then(function(images){_this.setState({uploading:false,images:images});}).catch(function(err){err.json().then(function(e){console.log(e);_this.setState({uploading:false});});});};_this.filter=function(id){return _this.state.images.filter(function(image){return image.public_id!==id;});};_this.removeImage=function(id){_this.setState({images:_this.filter(id)});};_this.onError=function(id){console.log('Oops, something went wrong on Filter');_this.setState({images:_this.filter(id)});};return _this;}_createClass(FileUpload,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"api/images/get\").then(function(res){if(res.ok){return _this2.setState({loading:false});}console.log(\"Something went wrong on  componentDidMount\");});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"buttons fadein\",children:/*#__PURE__*/_jsx(\"div\",{className:\"button\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"single\",onChange:this.onChange})})});}}]);return FileUpload;}(Component);export{FileUpload as default};","map":{"version":3,"sources":["/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/src/components/FileUpload/FileUpload.jsx"],"names":["React","Component","FileUpload","state","loading","uploading","images","onChange","e","errs","files","Array","from","target","formData","FormData","types","forEach","file","i","every","type","push","size","name","append","length","err","console","log","setState","fetch","method","body","then","res","ok","json","catch","filter","id","image","public_id","removeImage","onError"],"mappings":"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","sourcesContent":["\n\nimport React, { Component } from 'react'\n\n\n\n\n\nexport default class FileUpload extends Component {\n  \n  state = {\n    loading: true,\n    uploading: false,\n    images: []\n  }\n\n  componentDidMount() {\n    fetch(\"api/images/get\")\n      .then(res => {\n        if (res.ok) {\n          return this.setState({ loading: false })  \n        }\n        console.log(\"Something went wrong on  componentDidMount\"); \n        \n      })\n  }\n\n\n\n  onChange = e => {\n    const errs = [] \n    const files = Array.from(e.target.files)\n\n    const formData = new FormData()\n    const types = ['image/png', 'image/jpeg', 'image/gif']\n\n    files.forEach((file, i) => {\n\n      if (types.every(type => file.type !== type)) {\n        errs.push(`'${file.type}' is not a supported format`)\n      }\n\n      if (file.size > 150000) {\n        errs.push(`'${file.name}' is too large, please pick a smaller file`)\n      }\n\n      formData.append(\"file\", file)\n    })\n\n    if (errs.length) {\n      return errs.forEach((err) =>\n        console.log(err)\n      );\n    }\n\n    this.setState({ uploading: true })\n\n    fetch(\"api/images/put\", {\n      method: 'POST',\n      body: formData\n    })\n    .then(res => {\n      if (!res.ok) {\n        throw res\n      }\n      return res.json()\n    })\n    .then(images => {\n      this.setState({\n        uploading: false, \n        images\n      })\n    })\n    .catch(err => {\n      err.json().then(e => {\n        console.log(e)\n        this.setState({ uploading: false })\n      })\n    })\n  }\n\n  filter = id => {\n    return this.state.images.filter(image => image.public_id !== id)\n  }\n\n  removeImage = id => {\n    this.setState({ images: this.filter(id) })\n  }\n\n  onError = id => {\n    console.log('Oops, something went wrong on Filter')\n    this.setState({ images: this.filter(id) })\n  }\n  \n  render() {\n\n\n    return (\n      <div className=\"buttons fadein\">\n    <div className=\"button\">\n      \n      <input type=\"file\" id=\"single\" onChange={this.onChange} />\n    </div>\n  </div>\n    )\n  }\n}\n\n\n  \n"]},"metadata":{},"sourceType":"module"}