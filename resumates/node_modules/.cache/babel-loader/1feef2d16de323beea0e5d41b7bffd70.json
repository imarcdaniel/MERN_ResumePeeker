{"ast":null,"code":"import _regeneratorRuntime from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./App.css';// Add the Route named import\nimport{BrowserRouter,Routes,Route,Navigate}from'react-router-dom';import AuthPage from'./pages/AuthPage/AuthPage';import IndexPage from'./pages/IndexPage/IndexPage';import Navbar from'./components/Navbar/Navbar';import UploadForm from'./components/UploadForm/UploadForm';import Resume from'./components/Resume/Resume';import UploadPage from'./pages/UploadPage/UploadPage';import ProfilePage from'./pages/ProfilePage/ProfilePage';import LandingPage from'./pages/LandingPage/LandingPage';import FileUpload from\"./components/FileUpload/FileUpload\";import{Link}from'react-router-dom';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:null,resumes:[]};_this.getResumes=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/resumes\").then(function(res){return res.json();}).then(function(data){return _this.setState({resumes:data});});case 2:case\"end\":return _context.stop();}}},_callee);}));_this.setUserInState=function(incomingUserData){_this.setState({user:incomingUserData});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var token=localStorage.getItem('token');if(token){var payload=JSON.parse(atob(token.split('.')[1]));// decode token\nif(payload.exp<Date.now()/1000){// Check if our token is expired, and remove if it is (standard/boilerplate)\nlocalStorage.removeItem('token');token=null;}else{// token not expired! our user is still 'logged in'. Put them into state.\nvar userDoc=payload.user;// grab user details from token\nthis.setState({user:userDoc});}}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"main\",{className:\"App\"},/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(FileUpload,null),this.state.user?/*#__PURE__*/React.createElement(Routes,null,/*#__PURE__*/React.createElement(Route,{path:\"/index\",element:/*#__PURE__*/React.createElement(IndexPage,null)}),/*#__PURE__*/React.createElement(Route,{path:\"/LandingPage\",element:/*#__PURE__*/React.createElement(LandingPage,null)}),/*#__PURE__*/React.createElement(Route,{path:\"/Upload\",element:/*#__PURE__*/React.createElement(UploadPage,null)}),/*#__PURE__*/React.createElement(Route,{path:\"/Profile\",element:/*#__PURE__*/React.createElement(ProfilePage,null)}),/*#__PURE__*/React.createElement(Navigate,{to:\"/index\"})):/*#__PURE__*/React.createElement(AuthPage,{setUserInState:this.setUserInState}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/ericmbc/GA/resumates/MERN_ResumePeeker/resumates/src/App.js"],"names":["React","Component","BrowserRouter","Routes","Route","Navigate","AuthPage","IndexPage","Navbar","UploadForm","Resume","UploadPage","ProfilePage","LandingPage","FileUpload","Link","App","state","user","resumes","getResumes","fetch","then","res","json","data","setState","setUserInState","incomingUserData","token","localStorage","getItem","payload","JSON","parse","atob","split","exp","Date","now","removeItem","userDoc"],"mappings":"2/BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA;AACA,OAAQC,aAAR,CAAuBC,MAAvB,CAA+BC,KAA/B,CAAsCC,QAAtC,KAAsD,kBAAtD,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oCAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iCAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iCAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oCAAvB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,GAEMC,CAAAA,G,+SACJC,K,CAAQ,CACNC,IAAI,CAAE,IADA,CAENC,OAAO,CAAE,EAFH,C,OAKRC,U,sEAAa,yJACLC,CAAAA,KAAK,CAAC,cAAD,CAAL,CAAsBC,IAAtB,CAA2B,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAA3B,EAAgDF,IAAhD,CAAqD,SAAAG,IAAI,QAAI,OAAKC,QAAL,CAAc,CAACP,OAAO,CAAEM,IAAV,CAAd,CAAJ,EAAzD,CADK,uD,SAKbE,c,CAAiB,SAACC,gBAAD,CAAsB,CACrC,MAAKF,QAAL,CAAc,CAAER,IAAI,CAAEU,gBAAR,CAAd,EACD,C,gEAMD,4BAAoB,CAElB,GAAIC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CACA,GAAIF,KAAJ,CAAW,CACT,GAAMG,CAAAA,OAAO,CAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACN,KAAK,CAACO,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,CAAhB,CAAuD;AACvD,GAAIJ,OAAO,CAACK,GAAR,CAAcC,IAAI,CAACC,GAAL,GAAa,IAA/B,CAAqC,CAAG;AACtCT,YAAY,CAACU,UAAb,CAAwB,OAAxB,EACAX,KAAK,CAAG,IAAR,CACD,CAHD,IAGO,CAAE;AACP,GAAIY,CAAAA,OAAO,CAAGT,OAAO,CAACd,IAAtB,CAA2B;AAC3B,KAAKQ,QAAL,CAAc,CAACR,IAAI,CAAEuB,OAAP,CAAd,EACD,CACF,CACF,C,sBAED,iBAAS,CACP,mBACE,4BAAM,SAAS,CAAC,KAAhB,eACE,oBAAC,MAAD,MADF,cAEE,oBAAC,UAAD,MAFF,CAMG,KAAKxB,KAAL,CAAWC,IAAX,cACC,oBAAC,MAAD,mBACE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,OAAO,cAAE,oBAAC,SAAD,MAA9B,EADF,cAEE,oBAAC,KAAD,EAAO,IAAI,CAAC,cAAZ,CAA2B,OAAO,cAAE,oBAAC,WAAD,MAApC,EAFF,cAGE,oBAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,CAAsB,OAAO,cAAE,oBAAC,UAAD,MAA/B,EAHF,cAIE,oBAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,OAAO,cAAE,oBAAC,WAAD,MAAhC,EAJF,cAKE,oBAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EALF,CADD,cASC,oBAAC,QAAD,EAAU,cAAc,CAAE,KAAKS,cAA/B,EAfJ,CADF,CAqBD,C,iBAxDe1B,S,EA2DlB,cAAee,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n// Add the Route named import\nimport {BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport AuthPage from './pages/AuthPage/AuthPage'\nimport IndexPage from './pages/IndexPage/IndexPage';\nimport Navbar from './components/Navbar/Navbar';\nimport UploadForm from './components/UploadForm/UploadForm';\nimport Resume from './components/Resume/Resume';\nimport UploadPage from './pages/UploadPage/UploadPage';\nimport ProfilePage from './pages/ProfilePage/ProfilePage';\nimport LandingPage from './pages/LandingPage/LandingPage';\nimport FileUpload from \"./components/FileUpload/FileUpload\";\nimport { Link } from 'react-router-dom'\n\nclass App extends Component {\n  state = {\n    user: null,\n    resumes: []\n  }\n\n  getResumes = async () => {\n    await fetch(\"/api/resumes\").then((res) => res.json()).then(data => this.setState({resumes: data}))\n  }\n\n  // a method to update user\n  setUserInState = (incomingUserData) => {\n    this.setState({ user: incomingUserData})\n  }\n\n  componentDidMount() {\n      this.getPosts()\n}\n\n  componentDidMount() {\n    \n    let token = localStorage.getItem('token')\n    if (token) {\n      const payload = JSON.parse(atob(token.split('.')[1])); // decode token\n      if (payload.exp < Date.now() / 1000) {  // Check if our token is expired, and remove if it is (standard/boilerplate)\n        localStorage.removeItem('token');\n        token = null;\n      } else { // token not expired! our user is still 'logged in'. Put them into state.\n        let userDoc = payload.user // grab user details from token\n        this.setState({user: userDoc})      \n      }\n    }\n  }\n\n  render() {\n    return (\n      <main className=\"App\">\n        <Navbar />\n        <FileUpload />\n        {/* this ternary operator asks: is there a user in state? */}\n        {/* if yes, they can see our pages: neworder, etc. */}\n        {/* if no(user is null), show them only the <AuthPage> */}\n        {this.state.user ? (\n          <Routes>\n            <Route path=\"/index\" element={<IndexPage />} />\n            <Route path=\"/LandingPage\" element={<LandingPage />} />\n            <Route path=\"/Upload\" element={<UploadPage />} />\n            <Route path=\"/Profile\" element={<ProfilePage />} />\n            <Navigate to=\"/index\" />\n          </Routes>\n        ) : (\n          <AuthPage setUserInState={this.setUserInState} />\n        )}\n      </main>\n    );\n\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}